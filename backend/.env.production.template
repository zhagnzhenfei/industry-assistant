# =============================================================================
# AI 助手项目 - 生产级环境配置模板
# =============================================================================
# 说明：复制此文件为 .env 并填入实际的配置值
# 命令：cp .env.production.template .env
# =============================================================================

# =============================================================================
# 基础应用配置
# =============================================================================
# 应用环境 (development, staging, production)
ENVIRONMENT=production

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 应用服务配置
APP_HOST=0.0.0.0
APP_PORT=8001

# Python环境配置
PYTHONPATH=/app
PYTHONUNBUFFERED=1

# =============================================================================
# 数据库配置
# =============================================================================
# PostgreSQL数据库配置
DB_HOST=postgres
DB_PORT=5432
DB_NAME=app_db
DB_USER=app_user
DB_PASSWORD=your_secure_password_here

# 数据库连接URL（完整格式）
DATABASE_URL=postgresql://app_user:your_secure_password_here@postgres:5432/app_db

# =============================================================================
# Redis缓存配置
# =============================================================================
Redis主机配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here
REDIS_DB=0

# Redis连接URL（完整格式）
REDIS_URL=redis://:your_redis_password_here@redis:6379/0

# =============================================================================
# JWT认证配置
# =============================================================================
# JWT密钥（必须修改，使用强随机字符串）
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production-min-32-chars

# JWT算法和过期时间
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# AI模型API配置
# =============================================================================
# DashScope API配置（阿里云）
# 获取地址：https://dashscope.console.aliyun.com/
DASHSCOPE_API_KEY=your-dashscope-api-key-here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1

# OpenAI兼容配置
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4

# 通用模型配置
LLM_MODEL=qwen-turbo
EMBEDDING_MODEL=text-embedding-v4

# =============================================================================
# Web搜索API配置
# =============================================================================
# 搜索引擎选择 (serper, tavily)
SEARCH_API_PROVIDER=serper

# Serper API配置（推荐）
# 获取地址：https://serper.dev/
SERPER_API_KEY=your-serper-api-key-here

# Tavily API配置（备选）
# 获取地址：https://tavily.com/
TAVILY_API_KEY=your-tavily-api-key-here

# =============================================================================
# 向量数据库配置
# =============================================================================
# Milvus向量数据库配置
MILVUS_HOST=milvus-standalone
MILVUS_PORT=19530
MILVUS_USERNAME=
MILVUS_PASSWORD=
MILVUS_COLLECTION=document_chunks
MILVUS_VECTOR_DIMENSION=1024

# =============================================================================
# 记忆功能配置
# =============================================================================
# 记忆功能主开关
ENABLE_MEMORY=false

# 记忆提供者类型 (noop, milvus, full)
MEMORY_PROVIDER_TYPE=noop

# Mem0记忆功能（新版）
ENABLE_MEM0_MEMORY=false
MEM0_POSTGRES_DB=mem0_memories
MEM0_MILVUS_COLLECTION=user_memories
MEM0_LLM_MODEL=qwen-plus
MEM0_EMBEDDING_MODEL=text-embedding-v1

# =============================================================================
# 搜索引擎配置
# =============================================================================
# Elasticsearch配置
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_USER=elastic
ELASTICSEARCH_PASSWORD=your_elasticsearch_password_here

# 索引配置
POLICY_INDEX=policy_documents

# =============================================================================
# MCP服务配置
# =============================================================================
# MCP客户端URL
MCP_CLIENT_URL=http://mcp-service:8000

# Text2SQL功能开关
TEXT2SQL_ENABLED=true
TEXT2SQL_MODEL=qwen-plus
TEXT2SQL_MAX_RETRIES=3

# =============================================================================
# 文件存储配置
# =============================================================================
# 文件上传配置
MAX_FILE_SIZE=50MB
UPLOAD_PATH=/app/uploads
ALLOWED_EXTENSIONS=pdf,docx,doc,txt,md

# =============================================================================
# API和安全配置
# =============================================================================
# API基础URL
API_BASE_URL=http://localhost:9380
API_KEY=your_api_key_here

# CORS配置（生产环境应该限制具体域名）
CORS_ORIGINS=*

# =============================================================================
# 外部集成配置
# =============================================================================
# LangSmith追踪（可选）
# LANGCHAIN_TRACING_V2=false
# LANGCHAIN_API_KEY=ls_your_langsmith_api_key_here
# LANGSMITH_PROJECT=ai-assistant

# =============================================================================
# 监控和日志配置
# =============================================================================
# 结构化日志
STRUCTURED_LOGGING=true

# 健康检查配置
HEALTH_CHECK_ENABLED=true

# 指标收集
METRICS_ENABLED=false

# =============================================================================
# 部署相关配置
# =============================================================================
# Docker环境标识
IS_DOCKER_ENV=true

# 容器时区
TZ=Asia/Shanghai

# 进程ID文件
PID_FILE=/tmp/app.pid

# =============================================================================
# 开发环境专用配置（生产环境请忽略）
# =============================================================================
# 开发模式调试
DEBUG_MODE=false

# 热重载
HOT_RELOAD=false

# 数据库调试SQL
SQL_ECHO=false

# =============================================================================
# 配置说明
# =============================================================================
# 1. 必须修改的敏感配置：
#    - JWT_SECRET_KEY: 使用32位以上强随机字符串
#    - DB_PASSWORD: 数据库密码
#    - REDIS_PASSWORD: Redis密码
#    - DASHSCOPE_API_KEY: AI模型API密钥
#    - SERPER_API_KEY: 搜索API密钥
#
# 2. 生产环境安全建议：
#    - ENABLE_MEMORY=false: 禁用记忆功能减少性能开销
#    - LOG_LEVEL=INFO: 避免DEBUG日志泄露敏感信息
#    - CORS_ORIGINS: 设置为具体的允许域名
#    - 确保所有密码都是强随机字符串
#
# 3. 开发环境配置：
#    - 将localhost相关的服务改为容器名（如postgres, redis等）
#    - 启用调试功能：DEBUG_MODE=true, HOT_RELOAD=true
#    - 使用本地数据库：DB_HOST=localhost